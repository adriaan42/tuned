From 66d7161bdcf9585301fec40a10a2f44efc9ae85e Mon Sep 17 00:00:00 2001
From: Evgeni Golov <evgeni@debian.org>
Date: Sun, 13 Dec 2020 12:28:39 +0100
Subject: [PATCH] explicitly use /bin/bash for tuned scripts

---
 experiments/powertop2tuned.py                  | 2 +-
 profiles/cpu-partitioning/00-tuned-pre-udev.sh | 2 +-
 profiles/cpu-partitioning/script.sh            | 2 +-
 profiles/functions                             | 2 +-
 profiles/laptop-ac-powersave/script.sh         | 2 +-
 profiles/powersave/script.sh                   | 2 +-
 profiles/realtime-virtual-guest/script.sh      | 2 +-
 profiles/realtime-virtual-host/script.sh       | 2 +-
 profiles/realtime/script.sh                    | 2 +-
 profiles/spindown-disk/script.sh               | 2 +-
 10 files changed, 10 insertions(+), 10 deletions(-)

diff --git a/experiments/powertop2tuned.py b/experiments/powertop2tuned.py
index 211df2d..0726bcb 100755
--- a/experiments/powertop2tuned.py
+++ b/experiments/powertop2tuned.py
@@ -41,7 +41,7 @@ except ImportError:
 	from htmlentitydefs import name2codepoint
 
 
-SCRIPT_SH = """#!/bin/sh
+SCRIPT_SH = """#!/bin/bash
 
 . /usr/lib/tuned/functions
 
diff --git a/profiles/cpu-partitioning/00-tuned-pre-udev.sh b/profiles/cpu-partitioning/00-tuned-pre-udev.sh
index 7bfd7e0..e4319b2 100755
--- a/profiles/cpu-partitioning/00-tuned-pre-udev.sh
+++ b/profiles/cpu-partitioning/00-tuned-pre-udev.sh
@@ -1,4 +1,4 @@
-#!/bin/sh
+#!/bin/bash
 
 type getargs >/dev/null 2>&1 || . /lib/dracut-lib.sh
 
diff --git a/profiles/cpu-partitioning/script.sh b/profiles/cpu-partitioning/script.sh
index 8677050..cb378b7 100755
--- a/profiles/cpu-partitioning/script.sh
+++ b/profiles/cpu-partitioning/script.sh
@@ -1,4 +1,4 @@
-#!/bin/sh
+#!/bin/bash
 
 . /usr/lib/tuned/functions
 
diff --git a/profiles/functions b/profiles/functions
index 0e1836b..ff36630 100644
--- a/profiles/functions
+++ b/profiles/functions
@@ -205,7 +205,7 @@ set_disk_scheduler_quantum() {
 
 restore_disk_scheduler_quantum() {
 	if [ -r "$DISK_QUANTUM_SAVE" ]; then
-		/bin/sh "$DISK_QUANTUM_SAVE" &>/dev/null
+		/bin/bash "$DISK_QUANTUM_SAVE" &>/dev/null
 		rm -f "$DISK_QUANTUM_SAVE"
 	fi
 }
diff --git a/profiles/laptop-ac-powersave/script.sh b/profiles/laptop-ac-powersave/script.sh
index 3b73626..580082e 100755
--- a/profiles/laptop-ac-powersave/script.sh
+++ b/profiles/laptop-ac-powersave/script.sh
@@ -1,4 +1,4 @@
-#!/bin/sh
+#!/bin/bash
 
 . /usr/lib/tuned/functions
 
diff --git a/profiles/powersave/script.sh b/profiles/powersave/script.sh
index b0d329d..c73f4ef 100755
--- a/profiles/powersave/script.sh
+++ b/profiles/powersave/script.sh
@@ -1,4 +1,4 @@
-#!/bin/sh
+#!/bin/bash
 
 . /usr/lib/tuned/functions
 
diff --git a/profiles/realtime-virtual-guest/script.sh b/profiles/realtime-virtual-guest/script.sh
index ce94a4b..08efd4d 100755
--- a/profiles/realtime-virtual-guest/script.sh
+++ b/profiles/realtime-virtual-guest/script.sh
@@ -1,4 +1,4 @@
-#!/bin/sh
+#!/bin/bash
 
 . /usr/lib/tuned/functions
 
diff --git a/profiles/realtime-virtual-host/script.sh b/profiles/realtime-virtual-host/script.sh
index edae6c5..597bb66 100755
--- a/profiles/realtime-virtual-host/script.sh
+++ b/profiles/realtime-virtual-host/script.sh
@@ -1,4 +1,4 @@
-#!/bin/sh
+#!/bin/bash
 
 . /usr/lib/tuned/functions
 
diff --git a/profiles/realtime/script.sh b/profiles/realtime/script.sh
index 4151731..ada5a93 100755
--- a/profiles/realtime/script.sh
+++ b/profiles/realtime/script.sh
@@ -1,4 +1,4 @@
-#!/bin/sh
+#!/bin/bash
 
 . /usr/lib/tuned/functions
 
diff --git a/profiles/spindown-disk/script.sh b/profiles/spindown-disk/script.sh
index 5ee40dd..a534697 100755
--- a/profiles/spindown-disk/script.sh
+++ b/profiles/spindown-disk/script.sh
@@ -1,4 +1,4 @@
-#!/bin/sh
+#!/bin/bash
 
 . /usr/lib/tuned/functions
 
-- 
2.29.2

